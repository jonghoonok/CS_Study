# System Programming

시스템 프로그래밍



참고서적 및 수업

- 패스트캠퍼스 컴퓨터공학 올인원 패키지 : 시스템 프로그래밍
- 



[TOC]

## **1. 시스템 프로그래밍이란?**



무엇을 공부하는가?

- 운영체제 기초 이론에 기반한 실습
- 리눅스의 활용
  - 인터넷 서비스의 서버 환경 익히기
  - 고급 운영체제 기능의 직접적인 제어
  - UNIX 계열 OS 사용법 익히기



### 1.1. 리눅스란?



리눅스의 특징

- 서버에 많이 사용되는 운영체제
  - 최근 서버 환경은 대부분 리눅스 기반
  - AWS의 서버를 세팅할 때 고를 수 있는 운영체제는 대부분 리눅스
- 프로그래밍에도 많이 사용됨
  - 빠른 테스트를 위해 **clean한 리눅스 환경**에서 컴파일하는 경우
    - plain한 프로그래밍이 가능
    - clean한 리눅스 환경 : kernel + shell + system 기본 프로그램
- UNIX 계열 운영체제임
  - 리눅스의 사용법을 익히면 UNIX의 사용법 또한 익힐 수 있음
  - 다중 사용자, 다중 작업이 가능
- 오픈 소스임



리눅스의 역사

- 대학의 UNIX 컴퓨터를 집에서 쓰기 위해 리누스 토발즈가 커널을 개발
- GNU(GNU is Not UNIX) 프로젝트
  - 여러 회사에서 UNIX가 각자 개발되어 소스가 공유되지 않던 문화에 반발하여 시작
  - 리차드 스톨만이 1985년에 GNU 선언문을 발표
  - 자유 소프트웨어 재단(FSF)설립, GNU **공개 라이센스**(GPL) 규약 제공
    - 소스의 무료 공개 + 변경 후 배포 시 소스 오픈 강제
  - OS 개발 프로젝트
    - 시스템 콜, 컴파일러, API, 라이브러리, 쉘을 개발
    - GNU Hurd : 커널 개발이 지연됨
- GNU 프로젝트와 리눅스의 만남
  - 리차드 스톨만이 리누스 토발즈에게 커널이 GPL을 따르게 하지 않겠냐고 제안
  - 두 프로젝트가 합쳐지며 오픈 소스 OS인 리눅스가 완성



### 1.2. 우분투 리눅스 사용



리눅스 배포판이란?

- 리눅스 커널 및 다양한 소프트웨어 패키지(API, 컴파일러, 쉘 등)를 묶어서 배포하는 것
  - Red Hat Linux, Fedora, ubuntu 등
  - 이 문서에서는 ubuntu 기준으로 설명



리눅스 서버 생성 및 접속

- AWS에서 EC2 또는 인스턴스(서버) 생성
  - ubuntu로 생성
- **Elastic IP** 생성 및 접속
  - 동적으로 생성되는 IP(비용 발생)
  - 서버에는 고정 IP를 설정해야 함
- 자신의 PC(클라이언트)에서 EC2(서버) 접속
  - Mac 기준 : Shell을 이용
  - 윈도우 기준
    - 인스턴스 생성 시 다운로드 받은 `.pem`파일을 `.ppk`로 변환해야 함
    - putty 다운로드
    - putty gen 실행하여 변환
    - putty 실행하여 `ubuntu@IPaddress` 입력
    - Auth에서 `.ppk`파일을 로딩



VMWare

- 클라이언트에서 우분투 리눅스를 사용하기 위해 VMWare를 설치
- ubuntu server를 다운로드받아 VMWare에서 iso파일을 이용해 설치



## **2. 시스템 프로그래밍 기본**



### 2.1. UNIX/Linux의 기본 구성 



리눅스와 파일

- **모든 것은 파일**이라는 철학을 따름
  - 모든 interaction은 파일을 읽고 쓰듯이 이루어 짐
  - 마우스, 키보드 등 모든 디바이스 관련 기술도 파일처럼 취급됨
- 파일 네임스페이스
  - 전역 **네임스페이스**를 제공함
    - 리눅스는 모든 파일이 root directory에 속함(`/media/floofy/jonghoon.jpg`)
    - 윈도우의 경우 A 드라이브, C 드라이브 등이 나뉘어 있음
- 파일은 inode 고유값과 자료구조에 의해 관리됨



리눅스와 프로세스

- 리눅스 실행 파일 포맷
  - ELF(Executable and Linkable Format)
  - 콜스택, 코드(텍스트), 데이터 및 BSS 섹션 등
- 다양한 시스템 리소스와 관련
  - 프로세스 내에서 시스템 콜 호출을 통해 리소스를 처리할 수 있도록 구성됨
  - 타이머, 시그널, 파일, 네트워크, 디바이스, IPC 등
- 가상 메모리 지원
- 각 프로세스는 pid(프로세스 ID) 고유값으로 구분됨
- 신규 프로세스의 생성
  - init 프로세스(첫 번째 프로세스)를 기반으로 `fork()` 시스템콜을 사용해 생성



리눅스와 권한

- 리눅스는 사용자/그룹으로 권한을 관리함
  - 운영체제는 사용자/리소스 권한을 관리함
  - 로그인 사용자, 사용자를 그루핑한 그룹으로 관리할 수 있음
  - root는 슈퍼 관리자
- **파일마다** 권한을 관리함
  - 소유자, 소유자 그룹, 모든 사용자에 대해 실행, 읽기, 쓰기 권한 관리
  - 접근 권한 정보는 inode 자료구조에 저장됨



다중 사용자 지원



파일 및 권한 관리



foreground, background 프로세스



프로세스 관리 및 제어



리눅스 파일 시스템



하드 링크, 소프트 링크





## **3. 시스템 프로그래밍 핵심 기술**



시스템콜과 API



ABI와 표준



## **4. 프로세스 관리**



프로세스 ID



프로세스 ID 시스템콜



프로세스 생성과 종료

fork



exec



wait



shell customize



copy on write



exit



프로세스 스케줄링 관련



IPC 기법



시그널 동작 메커니즘



## **5. Shell Script**



변수



조건문



반복문



예제





## **6. 스레드**

기본



동기화



## **7. 메모리**



mmap



파일 시스템 관련 시스템콜